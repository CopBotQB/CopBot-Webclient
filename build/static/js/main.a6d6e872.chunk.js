(this.webpackJsonpcopbot=this.webpackJsonpcopbot||[]).push([[0],{17:function(e,t,s){"use strict";s.r(t);var n=s(12),a=s(13),c=s(16),r=s(15),i=s(0),o=s(2),d=s.n(o),l=s(14),j=s.n(l),b=(s(23),s(24)),u={};function p(e){return e.visible?Object(i.jsxs)("div",{class:"loadcontainer",children:[Object(i.jsx)("div",{class:"loader"}),Object(i.jsx)("p",{class:"loadertext",children:"Loading database entries..."})]}):Object(i.jsx)("div",{class:"loadcontainer"})}function h(e){return e.text.split("\n").length<2?Object(i.jsx)("b",{children:"No users match this roster ID"}):e.text.split("\n").slice(0,-1).map((function(e){var t=e.charAt(1),s=/{([^}]+)}/gi,n=e.match(s)[0];e=e.replace(s,"");var a=n.substring(1,n.length-1).split(":");n=a[0];var c=a[1],r=((Date.now()-parseInt(n))/1e3).toFixed(1);return"X"===t?r>300?Object(i.jsxs)("p",{class:"pred large",children:[" ",Object(i.jsx)("span",{class:"dotr"}),e.substring(3,e.length)," ",Object(i.jsx)("p",{class:"info-red",children:"This client has disconnected. Restart the client to reconnect."})]}):Object(i.jsxs)("p",{class:"pred large",children:[" ",Object(i.jsx)("span",{class:"dotr"}),e.substring(3,e.length)," ",Object(i.jsxs)("p",{class:"info-red",children:["No data recieved for ",r," seconds"]})]}):"-"===t?Object(i.jsxs)("p",{class:"pyellow large",children:[" ",Object(i.jsx)("span",{class:"doty"}),e.substring(3,e.length)," ",Object(i.jsxs)("p",{class:"info-yellow",children:["Tabbed out for ",u[c]," second(s)."]})]}):"+"===t?Object(i.jsxs)("p",{class:"pgreen large",children:[" ",Object(i.jsx)("span",{class:"dotg"}),e.substring(3,e.length)," ",Object(i.jsx)("p",{class:"info-green",children:"Online and tabbed in!"})]}):Object(i.jsxs)("p",{children:[" ",e]})}))}var f=function(e){Object(c.a)(s,e);var t=Object(r.a)(s);function s(e){var a;return Object(n.a)(this,s),(a=t.call(this,e)).setNewRID=function(){document.getElementById("root"),a.setState({rid:a.inputRef.current.value,goodDataLoaded:a.inputRef.current.value===a.state.curDataLoaded})},a.getOnlineState=function(){b.get("https://copbot-e0c62.firebaseio.com/.json").then((function(e){if(null!=e.data){console.log("online state recieved");for(var t="",s=0;s<Object.keys(e.data).length;s++){var n=Object.keys(e.data)[s],c=e.data[n],r=a.state.rid;if(a.setState({curDataLoaded:r}),c.roster===r){var i=c.user,o=c.online,d=c.tabbedin,l=c.editTimestamp,j="";Date.now()-l>5e3?(j="[X] Not connected -- ",u[n]=0):o?d?(j="[+] Ready -- ",u[n]=0):(j="[-] Tabbed out -- ","undefined"==typeof u[n]&&(u[n]=0),u[n]=u[n]+1):(j="[X] Not connected -- ",u[n]=0),t=t+j+i.username+"{"+l+":"+n+"}\n"}}a.setState({stateText:t})}})).catch((function(e){console.error(e)}))},a.state={stateText:"",rid:"",goodDataLoaded:!1,curDataLoaded:""},a.inputRef=d.a.createRef(),a}return Object(a.a)(s,[{key:"componentDidMount",value:function(){var e=this;setInterval((function(){e.getOnlineState()}),1e3),setInterval((function(){e.setNewRID()}),50)}},{key:"render",value:function(){return Object(i.jsxs)("div",{class:"login-page",children:[Object(i.jsxs)("p",{class:"TitleText",children:["CopBot Web Dashboard / Roster / ",this.state.rid]}),Object(i.jsx)("input",{ref:this.inputRef,type:"text",id:"inputfield",placeholder:"Roster name"}),Object(i.jsxs)("div",{class:"form",children:[Object(i.jsx)(h,{text:this.state.stateText}),Object(i.jsx)(p,{visible:this.state.goodDataLoaded?0:1})]})]})}}]),s}(d.a.Component);j.a.render(Object(i.jsx)(f,{rosterid:""}),document.getElementById("root"))},23:function(e,t,s){}},[[17,1,2]]]);
//# sourceMappingURL=main.a6d6e872.chunk.js.map